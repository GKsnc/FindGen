# GFW模型 （此版已废弃，详见系统说明文档）

目的是为了实现通过商品地址（意同商品ID，下不赘述），显示可信的商品流通历程。

## 三条规则

基础是三条规则，不能缺少，不能颠倒，不能更改。
1.商品地址中必须有生产商签名。
2.商品地址中必须有生产商到销售商的“交易”【交易的定义？】
3.商品地址中必须有消费者购买商品的“记录”【记录的定义？】

注：这三条规则都包含时间戳。

### 生产商签名

商品地址一个有效商品有一个唯一的地址。【有效的定义？】
商品地址由生产商签名系统生成，方为有效。

生产商签名是唯一的，可查的。

### 生产到销售的转移

生产商向销售商移交商品，
生产商一个输出（所有商品），多个输入（多个销售商），总和不变
生产商地址向销售商地址“交易”商品地址（UTXO模型）；
商品地址中增加生产商到销售商的“记录”。【记录的定义，生产商与销售商的签名？】

销售商地址是唯一的，可查的。

### 购买

消费者购买商品，
之前是面向一批商品地址，现在是面向一个商品地址。
“购买成功”，由消费者地址签名【购买成功的定义？】
消费者地址可以不唯一，不可查。
商品地址增加购买成功的“记录”。

【完成三条规则的商品，可不可删，如何删除？】

【拓展性的考虑】

![记录格式](https://images.gitee.com/uploads/images/2020/0213/160927_0c23e06e_5446993.jpeg "记录格式")

>版本：4字节，标识GFW模型版本;  
>公钥：未计算，标识发送方，验证使用；  
>签名：未计算，标识发送方，不变性，验证使用。  
>>流通记录：  
>>商品ID：52bit，商品全局唯一标识；  
>>序号：4字节，GFW模型规则使用；  
>>流通标识：4字节，流通标识；  
>>时间戳：未计算，标识流通发生时间；  
